{% extends 'layouts/auth_base.html' %}

{% block title %} Iniciar Sesión - Sistema de Actas Municipales {% endblock title %}

{% block bodyclass %} login-page {% endblock bodyclass %}

{% block content %}
<div class="login-box">
  <div class="login-logo">
    <a href="/">
      <img src="/static/dist/img/logoia.png" alt="Logo Actas IA" style="height: 60px; margin-bottom: 10px;">
      <br>
      <b>Actas</b> Municipales
    </a>
    <p style="font-size: 14px; margin-top: 10px;">Municipio de Pastaza</p>
  </div>
  <!-- /.login-logo -->
  <div class="card">
    <div class="card-body login-card-body">
      <p class="login-box-msg">Acceso al Sistema de Actas Municipales</p>

      <!-- Botones de OAuth -->
      <div class="oauth-buttons mb-4">
        <h6 class="text-center mb-3">Acceso para Funcionarios</h6>
        
        <!-- Botón GitHub -->
        <a href="/accounts/github/login/" class="btn btn-dark btn-block mb-2">
          <i class="fab fa-github mr-2"></i>
          Continuar con GitHub
        </a>
        
        <!-- Botón Google -->
        <a href="/accounts/google/login/" class="btn btn-danger btn-block mb-3">
          <i class="fab fa-google mr-2"></i>
          Continuar con Google
        </a>
      </div>

      <div class="text-center mb-3">
        <span class="text-muted">o</span>
      </div>

      <form method="post">
        {% csrf_token %}

        {% if form.non_field_errors %}
          {% for error in form.non_field_errors  %}
            <small class="text-danger mb-3">{{ error }}</small>
          {% endfor %}
        {% endif %}

        {% for field in form %}
        <div class="input-group mb-3">
          {{field}}
          <div class="input-group-append">
            <div class="input-group-text">
              <span class="fas {% if field.name == 'username' %} fa-user {% else %}  fa-lock {% endif %}"></span>
            </div>
          </div>
        </div>
        <small class="text-danger">{{ field.errors }}</small>
        {% endfor %}
        <div class="row">
          <div class="col-12">
            <div class="icheck-primary mb-2">
              <input type="checkbox" id="remember" name="remember_me">
              <label for="remember">
                <strong>Recordar mi sesión</strong> <small class="text-muted">(utiliza cookies seguras)</small>
              </label>
            </div>
            <div class="text-muted small mb-3">
              ℹ️ <em>Al marcar esta opción, mantendremos tu sesión activa de forma segura 
              utilizando cookies. Puedes cerrar sesión en cualquier momento.</em>
            </div>
          </div>
          <!-- /.col -->
          <div class="col-12">
            <button type="submit" class="btn btn-primary btn-block">
              <i class="fas fa-sign-in-alt mr-2"></i>Iniciar Sesión
            </button>
          </div>
          <!-- /.col -->
        </div>
      </form>

      <!--
      <div class="social-auth-links text-center mb-3">
        <p>- OR -</p>
        <a href="#" class="btn btn-block btn-primary">
          <i class="fab fa-facebook mr-2"></i> Sign in using Facebook
        </a>
        <a href="#" class="btn btn-block btn-danger">
          <i class="fab fa-google-plus mr-2"></i> Sign in using Google+
        </a>
      </div>
      -->
      <!-- /.social-auth-links -->

      <p class="mt-5 mb-2 text-center">
        <a href="{% url 'password_reset' %}">Restablecer Contraseña</a>
        &bull;
        <a href="{% url 'register' %}" class="text-center">Registrarse</a>
      </p>
      
      <!-- Información sobre Cookies -->
      <div class="card mt-3" style="background: #f8f9fa; border: 1px solid #e9ecef;">
        <div class="card-body p-3">
          <h6 class="card-title mb-2">
            🍪 <strong>Uso de Cookies</strong>
          </h6>
          <p class="card-text small text-muted mb-2">
            Este sistema utiliza cookies esenciales para:
          </p>
          <ul class="small text-muted mb-2" style="padding-left: 20px;">
            <li>Mantener tu sesión de usuario activa y segura</li>
            <li>Proteger contra ataques de seguridad (CSRF)</li>
            <li>Recordar tus preferencias de navegación</li>
          </ul>
          <p class="card-text small text-muted mb-0">
            Al iniciar sesión, aceptas automáticamente el uso de estas cookies necesarias para el funcionamiento del sistema.
            <a href="#" onclick="showCookieNotificationTest(); return false;" class="text-primary">Ver detalles completos</a>
          </p>
        </div>
      </div>
    </div>
    <!-- /.login-card-body -->
  </div>
</div>

{% endblock %}
